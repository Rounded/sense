(function(e,t){e.app={}})(window,$),function(e,t,n){n.fn={article:function(){var e=arguments[0].charAt(0);return e=="A"||e=="a"||e=="E"||e=="e"||e=="I"||e=="i"||e=="O"||e=="o"||e=="U"||e=="u"?"an ":"a "},getParamNames:function(e){var t=e.toString();return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g)||""}}}(window,$,window.app||{}),function(e,t,n){n.Item=function(t){var n=t||{};this.descriptor=n.descriptor,this.container=n.container||!1,this.containedItems=n.containedItems,this.comprisedOf=n.comprisedOf||[],this.combineWith=n.combineWith||[],this.visual_secret_threshold=n.visual_secret_threshold||1,this.getting=n.getting,this.sights=n.sights,this.sounds=n.sounds,this.taste=n.taste,this.smells=n.smells,this.feels=n.feels,this.dropping=n.dropping},n.Item.prototype={}}(window,$,window.app||{}),function(e,t,n){n.Player=function(t){var n=t||{};this.inventory=n.inventory||[],this.knownItems=n.knownItems||{},this.playerName=n.playerName||"Anonymous",this.perception=n.perception||0},n.Player.prototype={addItem:function(e){return this.inventory.push(e),this.inventory},look:function(e,t){return e.length?"Try as you might, your eyes will not focus on more than one item.":t.ambientLight*this.perception>e.visual_secret_threshold?typeof e.descriptor[0]!="undefined"?e.sights||"It looks like "+n.fn.article(e.descriptor[0])+e.descriptor[0]+", nothing more":e.sights||"You are not quite sure what it is":"The darkness is like an opaque substance that fills the air."},listen:function(e,t){return e.sounds||"The "+e.descriptor[0]+" isn't emmitting any sounds."},taste:function(e,t){return e.taste||"The "+e.descriptor[0]+" isn't all that flavorful. Although you wonder where its been."},smell:function(e,t){return e.smell||"There is a slight smell but you can't tell if it's from the item your fingers or the inside of your nose."},touch:function(e,t){return e.touch||"It feels like "+n.fn.article(e.descriptor[0])+e.descriptor[0]}}}(window,$,window.app||{}),function(e,t,n){n.Weapon=function(t){this.weapon="yes."},n.Weapon.prototype=new n.Item,n.Weapon.prototype.swing=function(){}}(window,$,window.app||{}),function(e,t,n){n.Room=function(t){var n=t||{};this.ambientLight=n.ambientLight||0,this.visual_secret_threshold=n.visual_secret_threshold||1,this.hiddenItems=n.hiddenItems||[],this.descriptor=n.descriptor,this.sights=n.sights,this.sounds=n.sounds,this.taste=n.taste,this.smells=n.smells,this.feels=n.feels},n.Room.prototype=new n.Item,n.Room.prototype={revealItem:function(e){return this.discoveredItems.push(e),this.discoveredItems}}}(window,$,window.app||{}),function(e,t,n){var r={};r.flint=new n.Item({descriptor:"flint",visual_secret_threshold:10}),r.stone=new n.Item({descriptor:["stone","flagstone","rock"]}),r.puddle=new n.Item({descriptor:"puddle",container:!0,containedItems:[r.flint,r.stone],sights:"It looks deeper than expected. Perhaps it is hidding something in its depths.",sounds:"The only sounds are those of the liquid dripping into it.",taste:"You immediately regret not smelling it first as it appears to be keroseen!"}),r.capris=new n.Item({descriptor:["capris","pants"],sights:"You Look like an idiot wearing them.",sounds:"They make a quite swishing sound when you walk (stealth -1).",tastes:"You probably don't want to do that.",smells:"You probably don't want to do that.",feels:"They feel light and thin (agility +2)."}),r.sword=new n.Item({descriptor:"sword",getting:"You're afraid the blade's power will overwhelm you.",sights:"It's the most badass thing you have ever laid your eyes on!",sounds:"Tilting your ear toward it, you can almost hear the whispers and cries of those that fell before it"});var i=new n.Room({descriptor:"cell",visual_secret_threshold:10,ambientLight:1,hiddenItems:[r.flint,r.sword],sights:"It appears to be a holding cell. There is an iron door on one wall.",sounds:"drip… drip… drip… The dripping noise is slow and even. It sounds as though droplets are falling into a small puddle nearby, close enough to reach out and touch.",feels:"It's cool where you are(ambient_temp). You feel solid but uneven flagstone beneath your feet."}),s=new n.Player({playerName:"Bob",perception:6,inventory:[r.capris],knownItems:{currentRoom:[i,r.puddle,r.stone]}});t(function(){var e=t("#readout-content"),n=t("#text-input"),r=t("#hidden-button"),o=function(t){var n=t.toLowerCase(),r=n.split(" ");r[0]==="save"?e.append("<p>Your progress has been saved in the imperial scrolls of honor... not really, but soon. Consider it hardcore mode!</p>"):r[0]==="help"?(e.append('<p>All you have are your senses (<span class="verb_hint">look, listen, feel, smell, taste)</span><br />'),e.append("Example Commands:<br />"),e.append('<span class="verb_hint">look</span> <span class="noun_hint">puddle</span> <br />'),e.append('<span class="verb_hint">listen</span><br />'),e.append("<em>Enter commands below.</em></p>")):r.length>=1&&(narration=u(r,i),e.append("<p>"+narration+"</p>"))},u=function(e,t){var n=[],r=e.length,i=t||{};for(m=0;m<r;m++){var o=e[m];if(typeof s[o]=="function"){n.push(o);break}if(m===r-1)return"You can't \""+e.join(" ")+'"'}var u=s.inventory.concat(s.knownItems.currentRoom),a=u.length,f=u.length;console.log(u);for(var l=0;l<f;l++)for(var c=0;c<r;c++)if(typeof u[l].descriptor=="object"){var h=u[l].descriptor.length;for(var p=0;p<h;p++)u[l].descriptor[p]===e[c]&&n.push(u[l])}else u[l].descriptor===e[c]&&n.push(u[l]);console.log(e),console.log(n);var d=n[0],v=n.length;if(v>2){nouns=[];for(var m=1;m<v;m++)nouns.push(n[m]);return s[d](nouns,i)}if(v===2)return noun=n[1],s[d](noun,i);if(v===1){if(r>1){var g=[];for(var y=0;y<r;y++)e[y]!==n[0]&&g.push(e[y]);return'There is no "'+g.join(" ")+'" for which to '+d}return s[d](i,i)}};n.focus(),n.on("keyup",function(n){if(n.keyCode===13){var r=t(this).val();r!==""?(o(r),this.value=""):e.append("Sometimes the best course of action is to take no action, but that is not the case here.")}})})}(window,$,window.app||{});