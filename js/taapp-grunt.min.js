(function(e,t){e.app={}})(window,$),function(e,t,n){n.fn={article:function(){var e=arguments[0].charAt(0);return e=="A"||e=="a"||e=="E"||e=="e"||e=="I"||e=="i"||e=="O"||e=="o"||e=="U"||e=="u"?"an ":"a "},getParamNames:function(e){var t=e.toString();return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g)||""}}}(window,$,window.app||{}),function(e,t,n){n.Item=function(t){var n=t||{};this.descriptor=n.descriptor,this.container=n.container||!1,this.containedItems=n.containedItems,this.comprisedOf=n.comprisedOf||[],this.combineWith=n.combineWith||[],this.visualSecretThreshold=n.visualSecretThreshold||1,this.getting=n.getting,this.sights=n.sights,this.visualSecret=n.visualSecret,this.sounds=n.sounds,this.taste=n.taste,this.smells=n.smells,this.feels=n.feels,this.dropping=n.dropping},n.Item.prototype={listContainedItems:function(){if(this.container){var e=this.containedItems.length,t=[];if(e!==0){for(var n=0;n<e;n++)t.push(this.containedItems[n].descriptor[0]);return"<p>The item contains:</p>"+t.join("<br />")}return"The container is empty :("}return null}}}(window,$,window.app||{}),function(e,t,n){n.Player=function(t){var n=t||{};this.inventory=n.inventory||[],this.knownItems=n.knownItems||{},this.playerName=n.playerName||"Anonymous",this.perception=n.perception||0},n.Player.prototype={addItem:function(e){return this.inventory.push(e),this.inventory},look:function(e,t){if(this.perception*t.ambientLight>0){console.log(e),console.log(e.length);if(e.length<2){var r=e[0];console.log(r);if(r.visualSecret&&this.perception*t.ambientLight>=r.visualSecretThreshold){var i=r.sights.concat(" "+r.visualSecret);return i+r.listContainedItems()}return r.sights+r.listContainedItems()||"It looks like "+n.fn.article(r.descriptor[0])+r.descriptor[0]+", nothing more."}return"Try as you might, your eyes will not focus on more than one item."}return"The inky blackness of your surroundings makes it impossible to see."},listen:function(e,t){return typeof e!="string"?e.sounds||"The "+e.descriptor[0]+" isn't emmitting any sounds.":'There is no "'+e+'" for which to listen to.'},taste:function(e,t){return typeof e!="string"?e.taste:'There is no "'+e+'" for which to taste'},smell:function(e,t){return typeof e!="string"?e.smell||"There is a slight smell but you can't tell if it's from the item your fingers or the inside of your nose.":'There is no "'+e+'" for which to smell'},touch:function(e,t){return typeof e!="string"?e.touch||"It feels like "+n.fn.article(e.descriptor[0])+e.descriptor[0]:'There is no "'+e+'" for which to touch'},take:function(e){var t=theitems.length;for(var n=0;n<t;n++)e[n]===this.knownItems[n]},search:function(e,t){console.log(this.knownItems);if(e.container){if(e.containedItems.length>0){var r="In the "+e.descriptor[0]+" You find:<br />";for(var i=0;i<e.containedItems.length;i++)r+=n.fn.article(e.descriptor[0])+e.containedItems[i].descriptor[0]+"<br />";var s=e.containedItems.splice(0);return this.knownItems.currentRoom.push(s),console.log(this.knownItems),r}return"You grope around in the "+e.descriptor[0]+", but find nothing. Dissapoint."}return"The "+e.descriptor[0]+" isn't a container."},drop:function(e,t){var n=e.length;for(i=0;i<n;i++){var r=this.inventory.splice(0);t.push(r)}return this.dropping||"You toss the "+this.descriptor+" to the side"},put:function(e,t){}}}(window,$,window.app||{}),function(e,t,n){n.Weapon=function(t){this.weapon="yes."},n.Weapon.prototype=new n.Item,n.Weapon.prototype.swing=function(){}}(window,$,window.app||{}),function(e,t,n){n.Room=function(t){var n=t||{};this.ambientLight=n.ambientLight||0,this.hiddenItems=n.hiddenItems||[],this.container=n.container||!1,this.containedItems=n.containedItems||[],this.descriptor=n.descriptor,this.sights=n.sights,this.sounds=n.sounds,this.taste=n.taste,this.smells=n.smells,this.feels=n.feels},n.Room.prototype=new n.Item,n.Room.prototype={revealItem:function(e){return this.discoveredItems.push(e),this.discoveredItems},listContainedItems:function(){if(this.container){var e=this.containedItems.length,t=[];if(e!==0){for(var n=0;n<e;n++)t.push(this.containedItems[n].descriptor[0]);return"<p>In the room there is:</p>"+t.join("<br />")}return"The container is empty :("}return null}}}(window,$,window.app||{}),function(e,t,n){var r={};r.flint=new n.Item({descriptor:["flint"]}),r.stone=new n.Item({descriptor:["stone","flagstone","rock"]}),r.puddle=new n.Item({descriptor:["puddle"],container:!0,containedItems:[r.flint,r.stone],visualSecretThreshold:6,sights:"It ripples lightly with every drop.",visualSecret:"As you look closer you can see that there is some depth to it!",sounds:"The only sounds are those of the liquid dripping into it.",taste:"You immediately regret not smelling it first as it appears to be keroseen!"}),r.capris=new n.Item({descriptor:["capris","pants"],sights:"You Look like an idiot wearing them.",sounds:"They make a quite swishing sound when you walk (stealth -1).",tastes:"You probably don't want to do that.",smells:"You probably don't want to do that.",feels:"They feel light and thin (agility +2)."}),r.sword=new n.Item({descriptor:["sword"],getting:"You're afraid the blade's power will overwhelm you.",sights:"It's the most badass thing you have ever laid your eyes on!",sounds:"Tilting your ear toward it, you can almost hear the whispers and cries of those that fell before it"});var i=new n.Room({descriptor:["cell"],ambientLight:3,hiddenItems:[r.sword],container:!0,containedItems:[r.puddle,r.stone],sights:"It appears to be a holding cell. There is an iron door on one wall.",sounds:"drip… drip… drip… The dripping noise is slow and even. It sounds as though droplets are falling into a small puddle nearby, close enough to reach out and touch.",feels:"It's cool where you are(ambient_temp). You feel solid but uneven flagstone beneath your feet."}),s=new n.Player({playerName:"You",inventory:[r.capris],knownItems:{currentRoom:[]},perception:2});t(function(){var e=t("#readout-content"),n=t("#text-input"),r=t("#hidden-button"),o=function(t){var n=t.toLowerCase(),r=n.split(" ");r[0]==="save"?e.append("<p>Your progress has been saved in the imperial scrolls of honor... not really, but soon. Consider it hardcore mode!</p>"):r[0]==="help"?(e.append('<p>All you have are your senses (<span class="verb_hint">look, listen, feel, smell, taste)</span><br />'),e.append("Example Commands:<br />"),e.append('<span class="verb_hint">look</span> <span class="noun_hint">puddle</span> <br />'),e.append('<span class="verb_hint">listen</span><br />'),e.append("<em>Enter commands below.</em></p>")):r.length>=1&&(narration=f(r,i),e.append("<p>"+narration+"</p>"))},u=function(e){},a=function(e,t){},f=function(e,t){var n="",r=[];room=t||{},numWords=e.length;for(var i=0;i<numWords;i++){var o=e[i];if(typeof s[o]=="function"){n=e[i];var u=e.lastIndexOf(e[i]);e.splice(u,1);break}}var a=s.inventory.concat(s.knownItems.currentRoom,t.containedItems),f=a.length;if(numWords>1)for(var l=0;l<numWords;l++)for(var c=0;c<f;c++){var h=a[c].descriptor.length;for(var p=0;p<h;p++)a[c].descriptor[p]===e[l]&&r.push(a[c])}else r.push(room);if(n){var d=r.length;return d>0?s[n](r,room):"There is no "+e.join(" ")+" for which to "+n}return"Although it may be your wish to "+e.join(" ")+". What would be the point?"};n.focus(),n.on("keyup",function(n){if(n.keyCode===13){var r=t(this).val();r!==""?(o(r),this.value=""):e.append("Sometimes the best course of action is to take no action, but that's not the case here.")}})})}(window,$,window.app||{});