(function(e,t){e.app={}})(window,$),function(e,t,n){n.fn={article:function(){var e=arguments[0].charAt(0);return e=="A"||e=="a"||e=="E"||e=="e"||e=="I"||e=="i"||e=="O"||e=="o"||e=="U"||e=="u"?"An ":"A "},getParamNames:function(e){var t=e.toString();return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g)||""}}}(window,$,window.app||{}),function(e,t,n){n.Item=function(t){var n=t||{};this.container=n.container||!1,this.comprisedOf=n.comprisedOf||[],this.combineWith=n.combineWith||[],this.discoveredItems=n.discoveredItems||[],this.visual_secret_threshold=n.visual_secret_threshold||1,this.descriptor=n.descriptor,this.sights=n.sights,this.sounds=n.sounds,this.getting=n.getting,this.containedItems=n.containedItems,this.dropping=n.dropping,this.feels=n.feels},n.Item.prototype={getDescriptor:function(){return typeof this.descriptor!="undefined"?n.fn.article(this.descriptor)+this.descriptor:"It has no name"}}}(window,$,window.app||{}),function(e,t,n){n.Player=function(t){var n=t||{};this.inventory=n.inventory||[],this.knownItems=n.knownItems||{},this.playerName=n.playerName||"Anonymous",this.perception=n.perception||0},n.Player.prototype={addItem:function(e){return this.inventory.push(e),this.inventory},look:function(e,t){return e.length?"Try as you might, your eyes will not focus on more than one item.":t.ambientLight*this.perception>e.visual_secret_threshold?typeof e.descriptor!="undefined"?e.sights||"It looks like "+n.fn.article(e.descriptor)+e.descriptor+", nothing more":e.sights||"You are not quite sure what it is":"Unable to see the details. It's too dark in the "+t.descriptor}}}(window,$,window.app||{}),function(e,t,n){n.Weapon=function(t){this.weapon="yes."},n.Weapon.prototype=new n.Item,n.Weapon.prototype.swing=function(){}}(window,$,window.app||{}),function(e,t,n){n.Room=function(t){var n=t||{};this.ambientLight=n.ambientLight||0,this.discoveredItems=n.discoveredItems||[],this.hiddenItems=n.hiddenItems||[],this.descriptor=n.descriptor,this.sights=n.sights},n.Room.prototype=new n.Item,n.Room.prototype={look:function(e){var t=e||0;return this.ambientLight*t>this.visual_secret_threshold?this.sights||"It's Just four walls, a floor, and ceiling":"It's black as night"},revealItem:function(e){return this.discoveredItems.push(e),this.discoveredItems},hasItem:function(e){for(var t=0;t<this.discoveredItems.length;t++)if(e===this.discoveredItems[t].descriptor)return!0}}}(window,$,window.app||{}),function(e,t,n){var r={};r.flint=new n.Item({descriptor:"flint",visual_secret_threshold:10}),r.stone=new n.Item({descriptor:"stone"}),r.puddle=new n.Item({descriptor:"puddle",container:!0,sights:"It looks deeper than expected. Perhaps it is hidding something in its depths.",containedItems:[r.flint,r.stone],sounds:"The only sounds are those of the liquid dripping into it."}),r.capris=new n.Item({descriptor:"capris",sights:"You Look like an idiot wearing them."}),r.sword=new n.Item({descriptor:"sword",sights:"It's the most badass thing you have ever laid your eyes on!",sounds:"Tilting your ear toward it, you can almost hear the whispers and cries of those that fell before it",getting:"You're afraid the blade's power will overwhelm you."});var i=new n.Room({descriptor:"cell",visual_secret_threshold:10,ambientLight:1,hiddenItems:[r.flint,r.sword],sights:"It appears to be a holding cell of sorts."}),s=new n.Player({playerName:"Bob",perception:5,inventory:[],knownItems:{currentRoom:[i,r.puddle,r.sword,r.capris]}});t(function(){var n=t("#readout-content"),r=t("#text-input"),o=t("#hidden-button"),u=function(e){var t=e,r=t.split(" ");r[0]==="save"?n.append("<p>Your progress has been saved in the imperial scrolls of honor... not really, but soon. Consider it hardcore mode!</p>"):r[0]==="help"?(n.append('<p>All you have are your senses (<span class="verb_hint">look, listen, feel, smell, taste)</span><br />'),n.append("Example Commands:<br />"),n.append('<span class="verb_hint">look</span> <span class="noun_hint">puddle</span> <br />'),n.append('<span class="verb_hint">listen</span><br />'),n.append("<em>Enter commands below.</em></p>")):r.length>=1&&(narration=a(r,i),n.append(narration+"<br />"))},a=function(t,n){console.log(s);var r=[],i=t.length,o=n||{};for(l=0;l<i;l++){var u=t[l];if(typeof s[u]=="function"){r.push(s[u]);break}if(l===i-1)return'Out of boredom or exasperation you proclaim, "'+t.join(" ")+'"'}var a=s.inventory.concat(s.knownItems.currentRoom),f=a.length;for(var l=0;l<f;l++)for(var c=0;c<i;c++)a[l].descriptor===t[c]&&r.push(a[l]);var h=r[0],p=r.length;if(p>2){nouns=[];for(var d=1;d<p;d++)nouns.push(r[d]);return e[h](nouns,o)}if(p===2)return noun=r[1],s[h](noun,o);if(p===1)return i>1?"There is no "+noun:(console.log(o),s[h](o,o))};r.focus(),r.on("keyup",function(e){if(e.keyCode===13){var r=t(this).val();r!==""?(u(r),this.value=""):n.append("<p>Sometimes the best course of action is to take no action.</p>")}})})}(window,$,window.app||{});