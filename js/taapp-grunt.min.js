/*!
                                         
  ______  ____    ____    ______  ____  
 /  ___/_/ __ \  /    \  /  ___/_/ __ \ 
 \___ \ \  ___/ |   |  \ \___ \ \  ___/ 
/____  > \___  >|___|  //____  > \___  >
     \/      \/      \/      \/      \/ 
 
*/
(function(e){e.app={}})(window,$),function(e,t,n){n.fn={article:function(){var e=arguments[0].charAt(0);return"A"==e||"a"==e||"E"==e||"e"==e||"I"==e||"i"==e||"O"==e||"o"==e||"U"==e||"u"==e?"an ":"a "},getParamNames:function(e){var t=""+e;return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g)||""}}}(window,$,window.app||{}),function(e,t,n){n.Item=function(e){var t=e||{};this.descriptor=t.descriptor,this.container=t.container||!1,this.containedItems=t.containedItems,this.comprisedOf=t.comprisedOf||[],this.combineWith=t.combineWith||[],this.visualSecretThreshold=t.visualSecretThreshold||1,this.getting=t.getting,this.sights=t.sights,this.visualSecret=t.visualSecret,this.sounds=t.sounds,this.taste=t.taste,this.smells=t.smells,this.feels=t.feels,this.dropping=t.dropping},n.Item.prototype={listContainedItems:function(){if(this.container){var e=this.containedItems.length,t=[];if(0!==e){for(var n=0;e>n;n++)t.push(this.containedItems[n].descriptor[0]);return"<p>The item contains:</p>"+t.join("<br />")}return"The container is empty :("}return null}}}(window,$,window.app||{}),function(e,t,n){n.Player=function(e){var t=e||{};this.inventory=t.inventory||[],this.knownItems=t.knownItems||[],this.playerName=t.playerName||"Anonymous"},n.Player.prototype={survey:function(){var e=this.knownItems.playerLocation.length,t=[];if(0!==e){for(var n=0;e>n;n++)t.push(this.knownItems.playerLocation[n].descriptor[0]);return"<p>You are aware of:</p>"+t.join("<br />")}return"You aren't aware of anything."},addItem:function(e){return this.inventory.push(e),this.inventory},look:function(e,t){if(t.ambientLight>0){if(2>e.length){var o=e[0],s=e[0].sights;if(o.visualSecret&&t.ambientLight>=o.visualSecretThreshold){for(var i=o.visualSecret,r=t.hiddenItems.length,a=0;r>a;a++)this.knownItems.playerLocation.push(t.hiddenItems[a]);s=s.concat(" "+i)}return s||"It looks like "+n.fn.article(o.descriptor[0])+o.descriptor[0]+", nothing more."}return"Try as you might, your eyes will not focus on more than one item."}return"The inky blackness of your surroundings makes it impossible to see."},listen:function(e){return console.log(e[0]),e[0].sounds||"The "+e[0].descriptor[0]+" isn't emmitting any sounds."},taste:function(e){return"string"!=typeof e?e.taste:'There is no "'+e+'" for which to taste'},smell:function(e){return"string"!=typeof e?e.smell||"There is a slight smell but you can't tell if it's from the item your fingers or the inside of your nose.":'There is no "'+e+'" for which to smell'},touch:function(e){return"string"!=typeof e?e.touch||"It feels like "+n.fn.article(e.descriptor[0])+e.descriptor[0]:'There is no "'+e+'" for which to touch'},search:function(e){if(console.log(this.knownItems),e.container){if(e.containedItems.length>0){for(var t="In the "+e.descriptor[0]+" You find:<br />",o=0;e.containedItems.length>o;o++)t+=n.fn.article(e.descriptor[0])+e.containedItems[o].descriptor[0]+"<br />";var s=e.containedItems.splice(0);return this.knownItems.currentRoom.push(s),console.log(this.knownItems),t}return"You grope around in the "+e.descriptor[0]+", but find nothing. Dissapoint."}return"The "+e.descriptor[0]+" isn't a container."},drop:function(e,t){var n=e.length;for(i=0;n>i;i++){var o=this.inventory.splice(0);t.push(o)}return this.dropping||"You toss the "+this.descriptor+" to the side"},put:function(){}}}(window,$,window.app||{}),function(e,t,n){n.Weapon=function(){this.weapon="yes."},n.Weapon.prototype=new n.Item,n.Weapon.prototype.swing=function(){}}(window,$,window.app||{}),function(e,t,n){n.Room=function(e){var t=e||{};this.ambientLight=t.ambientLight||0,this.hiddenItems=t.hiddenItems||[],this.container=t.container||!0,this.containedItems=t.containedItems||[],this.descriptor=t.descriptor,this.visualSecret=t.visualSecret,this.visualSecretThreshold=t.visualSecretThreshold,this.sights=t.sights,this.sounds=t.sounds,this.taste=t.taste,this.smells=t.smells,this.feels=t.feels},n.Room.prototype=new n.Item,n.Room.prototype={revealItem:function(e){return this.discoveredItems.push(e),this.discoveredItems},listContainedItems:function(){if(this.container){var e=this.containedItems.length,t=[];if(0!==e){for(var n=0;e>n;n++)t.push(this.containedItems[n].descriptor[0]);return"<p>In the room there is:</p>"+t.join("<br />")}return"The container is empty :("}return null}}}(window,$,window.app||{}),function(e,t,n){var o={};o.flint=new n.Item({descriptor:["flint"]}),o.stone=new n.Item({descriptor:["stone","flagstone","rock"]}),o.puddle=new n.Item({descriptor:["puddle"],container:!0,containedItems:[o.flint,o.stone],visualSecretThreshold:6,sights:"It ripples lightly with every drop.",visualSecret:"As you look closer you can see that there is some depth to it!",sounds:"The only sounds are those of the liquid dripping into it.",taste:"It tastes like keroseen!"}),o.capris=new n.Item({descriptor:["capris","pants"],sights:"You Look like an idiot wearing them.",sounds:"They make a quite swishing sound when you walk (stealth -1).",tastes:"You probably don't want to do that.",smells:"You probably don't want to do that.",feels:"They feel light and thin (agility +2)."}),o.sword=new n.Item({descriptor:["sword"],getting:"You're afraid the blade's power will overwhelm you.",sights:"It's the most badass thing you have ever laid your eyes on!",sounds:"Tilting your ear toward it, you can almost hear the whispers and cries of those that fell before it"});var s=new n.Room({descriptor:["cell"],ambientLight:1,hiddenItems:[o.sword,o.puddle],containedItems:[],visualSecretThreshold:1,visualSecret:"There is a sword lying on the floor.",sights:"It appears to be a holding cell.",sounds:"drip… drip… drip… The dripping noise is slow and even. It sounds as though droplets are falling into a small puddle nearby, close enough to reach out and touch.",feels:"It's cool where you are(ambient_temp). You feel solid but uneven flagstone beneath your feet."}),i=new n.Player({playerName:"You",inventory:[o.capris],knownItems:{playerLocation:[]}});t(function(){var e=t("#readout-content"),n=t("#text-input");t("#hidden-button");var o=function(t){var n=t.toLowerCase(),o=n.split(" ");"save"===o[0]?e.append("<p>Your progress has been saved in the imperial scrolls of honor... not really, but soon. Consider it hardcore mode!</p>"):"help"===o[0]?(e.append('<p>All you have are your senses (<span class="verb_hint">look, listen, feel, smell, taste)</span><br />'),e.append("Example Commands:<br />"),e.append('<span class="verb_hint">look</span> <span class="noun_hint">puddle</span> <br />'),e.append('<span class="verb_hint">listen</span><br />'),e.append("<em>Enter commands below.</em></p>")):o.length>=1&&(narration=r(o,s),e.append("<p>"+narration+"</p>"))},r=function(e,t){var n="",o=[];room=t||{},numWords=e.length;for(var s=0;numWords>s;s++){var r=e[s];if("function"==typeof i[r]){n=e[s];var a=e.lastIndexOf(e[s]);e.splice(a,1);break}}console.log(i.knownItems);var h=i.inventory.concat(i.knownItems.playerLocation),l=h.length;if(console.log(i.knownItems.playerLocation),numWords>1)for(var u=0;numWords>u;u++)for(var c=0;l>c;c++)for(var p=h[c].descriptor.length,d=0;p>d;d++)h[c].descriptor[d]===e[u]&&o.push(h[c]);else o.push(room);if(n){var m=o.length;return m>0?i[n](o,room):"There is no "+e.join(" ")+" for which to "+n}return"Although it may be your wish to "+e.join(" ")+". What would be the point?"};n.focus(),n.on("keyup",function(n){if(13===n.keyCode){var s=t(this).val();""!==s?(o(s),this.value=""):e.append("Sometimes the best course of action is to take no action, but that's not the case here.")}})})}(window,$,window.app||{});